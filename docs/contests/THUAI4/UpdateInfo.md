---
title: UpdateInfo
sidebar_label: UpdateInfo（每次下载必看！！！）
---

---

## 后决赛版本第五版更新内容

开启作弊模式。

+ LocalUI：在游戏界面中，输入作弊码 MAKEEEHARDAGAIN，并按下回车键，即可对角色 1 启用作弊模式；输入作弊码 MAKEEEHARDAGAIN，并按下空格键，即可对角色 2 启用作弊模式
+ Server：在 runServer 中，加入命令行参数 `--cheatMode`，即可以作弊模式打开 Server。作弊模式下，一旦选手向任何一个队友成功发送消息：Make EE hard again!（注意最后有一个感叹号，区分大小写），即可进入作弊模式。

作弊模式下，作弊的选手将会带有一个无限市场的盾和衣服，即一般不会受到任何伤害，且死亡会立刻原地复活。并且，回复子弹速度和子弹攻击力均变为原来的 100 倍。

## 决赛版本第四版更新内容

+ 游戏结束后 Agent 可以自动退出
+ 对参数的处理：移动时间为负值时，将会视为向反方向移动绝对值相等的正值；角度为 NaN 或 Inf 时视为零
+ 对 PlayBackPlayer 进行修改，打开一个 PlayBackPlayer 不会再在任务栏显示三个窗口，而是合并为一个

## 决赛版本第三版更新内容

+ Server 得分 BUG 修复（即当两人同时把一个人打退场时可能出现的 BUG）
+ 本地回放文件播放器修复：修复了可能存在的一些隐含的导致崩溃的 BUG，并且优化了界面，操作更流畅

## 决赛版本第二版更新内容

---

+ 增加了本地回放文件播放器：PlayBackPlayer，只能在 Windows 平台上使用，位于 win 文件夹内。

  优点：

  + 不需要开启 Server、Agent，在本地即可播放回放文件
  + 可以随时调节回放文件的播放速度
  + 功能专一，可以对回放文件直接打开，并自动识别 .thuaipb 后缀，尤其时设置为默认打开应用将会更加方便

  具体操作方式请看 win 文件夹内的视频教程：“教程：新的 PlayBackPlayer 的三种使用方式.mp4”

+ 解除了移动只能是 50ms 的倍数的限制，现在可以移动任意时间了！

+ 修复了游戏刚开始时会在身边囤积一堆子弹，过几秒才会发射的重大 BUG

+ Server 的回放模式增加了可以调节倍速的功能，可以自己选择播放速度：  

  在 Server 指定了 `--playBack` 参数的情况下，再继续指定 `playBackSpeed` 参数即可调节播放速度，例如：  

  ```cmd
  --port=20000 --fileName=video --playBack --playBackSpeed=2.0
  ```

  以上参数 `playBackSpeed=2.0` 指定比赛以 2.0 倍速回放。其中，`--playBackSpeed` 的最大值是 `4.0`，最小值是 `0.25`，即可以以四倍速到四分之一倍速之间的任意速率进行回放。

+ 调整了部分属性，属性见群内的“人物属性”

+ C++ 接口更改：

  + 主动行为现在加以频率限制，每 50ms 最多可以调用 50 次；主动行为现在返回 `bool` 值代表本次操作是否成功，如果超过了通信次数限制，则会返回 `false`。关于主动行为有哪些，参看 CAPI 内的 API 文档。
  + 增加 `Wait` 接口：`virtual bool AI::Wait() = 0;` 在 `asynchronous` 为 `true` 的情况下，调用此函数阻塞当前线程，直到下一次消息更新时继续运行。若等待时游戏已经结束，则不会进行等待，并返回 `false`。



---

# 旧的更新信息（看过的请略过）

---

## 初赛正式版新内容

### 新的功能

+ 观战功能：

  观战模式下，客户端并不会作为一个玩家参与游戏，只会作为旁观者观察比赛动态。

  两种客户端支持观战（均为 Windows 系统）：

  + Unity 界面增加观战功能，当 Unity 的 teamID 和 playerID 均为 1911 时，Unity 的 AI Battle 为观战模式。观战模式下，Unity 本身不参与游戏，只是可以在旁边观看比赛的实时动态。  

  + Client 界面增加观战功能。打开观战功能的两种方式：

    1. 运行 runClient.cmd，在开始界面指定 Agent 端口后，点击“Watch”，即可进入观战模式，随时观察比赛动向

    2. 在runClient.cmd 中指定参数 `--watch`：

       ```cmd
       --port=7777 --playerID=1911 --teamID=1911 --job=0 --watch
       ```

       在这种情况下，`playerID` 和 `teamID` 可以指定为任意值，皆可以观战模式进行旁观。



### 回放文件

优化了回放文件算法，极大缩小了回放文件的体积。同时原来的回放文件格式不再受到支持。关于回放功能的介绍，见下：  

> 如果 Server 的命令行通过 `-f` 或 `--fileName`指定了文件名，那么 Server 将会把游戏信息存放在以该名称为文件名、.thuaipb 为扩展名的回放文件中。
>
> 例如：
>
> ```cmd
> --port=20000 --teamCount=1 --playerCount=1 --gameTimeInSecond=600 --fileName=video
> ```
>
> 将会生成回放文件 `video.thuaipb` 。
>
> 同时，Server 增加回放模式：如果命令行中指定了 `-b` 或 `--playBack` 选项，则 Server 会以回放模式打开。  
>
> 例如下面的命令将会以回放模式打开 Server，并从 `video.thuaipb` 文件中读取游戏信息。
>
> ```cmd
> --port=20000 --playBack --fileName=video
> ```
>
> 当打开 Server 后，Server 进行等待，即弹出类似于“Press any key”字样。此时，你可以利用这个时间来打开 Agent 与 Unity 的 AIBattle 选项。当一切就绪后，回到 Server 按下回任意键，即可开始回放。届时你将会在 Unity 界面中看到回访文件中记录的游戏战况。



### BUG 修复

修复了若干BUG



### Makefile 增强

Makefile 会生成依赖文件，避免重复编译的问题



## Preview 3.0

+ Unity 视角移动：按 WASD 可以移动 Unity 界面的相机视角

+ 回放功能


## 二、BUG 修复

+ 修复了 Server 发送消息不足 20 帧的问题
+ 修复了客户端接口获取到的物体半径总为0的问题
+ 修复了投掷型子弹当指定飞行时间的时，实际飞行距离略长于指定时间的问题

## 三、代码优化

+ 游戏底层逻辑进行了彻底的重构，因此本版本的 Server 与以前的任何版本**不兼容**，并可能出现新的 BUG。但是游戏性能得到了一定程度的提升。

### 下个版本更新预告

+ 可以获取人物的持盾、持矛信息
+ 自定义地图
+ 网页对战

---

---

## 以下是历史，可略过

---

---

## Preview v2.0更新内容



### 一、特性更改

+ 在游戏开始，以及人物复活后，每个人都会自动使用一个时长为 5s 的盾（Shield）
+ 道具效果的修改
+ 增加了道具的刷新速度
+ 死亡时间降为了 30 秒



### 二、接口修改

+ 在一次 `play` 函数调用期间，获取到的信息也会即时更改了，不用等到下次调用才会更新信息
+ 获取信息的接口函数的返回值从原来的裸指针改为了智能指针，但用法是基本不变的，所以选手代码理论上没有太大改动。关于智能指针的用法以及修改后的接口，参见 CAPI 内的 API.md
+ Constant.h 中加入了更多的常量信息，例如人物的移动速度、人物的耐污值、道具的效果等



### 三、SDK 与库依赖

+ 增加了 linux SDK。关于 linux SDK 的用法，参见 README.md。
+ 将 Release 模式的依赖库改为了 x64，新版本的 CAPI 的 Debug 与 Release **都需要在 x64 进行编译**。**新依赖库已经附加在选手包中的 library 文件夹内，不再需要额外的下载链接**



### 四、Debug 版本

+ Server 提供了 Debug 版本，即 runServerDebug，Debug 版本在运行过程中会实时输出游戏的相关信息，供选手进行调试。但是 Debug 版本运行较慢，正式比赛不采用。关于 Debug 版本的其他信息，参见 README.md。



### 五、文档完善

+ 完善了 API.md 中的 C++ 标准库教程，并增加了对 lambda 表达式与智能指针的介绍
+ Introduction.md 的“人物”一栏中提供了不同职业对地面以及人物的染色范围，以及对其他玩家衣物的染色范围。



## 六、BUG 修复

+ 修复了 Client 第二次选择职业时出现的错误
+ 修复了 Client 退出后仍在后台运行问题
+ 修复了多人联机时使用多个 Agent 出错的问题



## 七、Unity 界面

+ 推出了全新的 Unity 界面！！！具体操作方式参见 README.md



---


