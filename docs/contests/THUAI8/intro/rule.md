# THUAI8 西游真经劫 完整规则

## 游戏基本规则与赛制

- 游戏采用Bo2赛制。双方在两局游戏中轮换扮演【取经团队】阵营和【妖怪】阵营进行对抗。
- 双方需要在地图上争夺资源、建造建筑、购买加成、消灭敌方单位，进而尽可能高的获取单局得分。两局比赛结束后，两局累计得分高者获胜。
- 游戏初始时，每个阵营会获得5000经济。
- 当游戏进行到7min，进入【决战期】，在这个阶段双方可以获取敌方所有单位视野，草丛区块消失，且商店无法再购买隐身药水，开放狂暴药水购买。
- 每局比赛满足下列条件之一即视为结束：
  - 【取经团队】阵营【唐僧】被击杀或【妖怪】阵营【九灵元圣】被击杀；
  - 比赛时间达到10分钟。

- 选手需要为己方阵营的6名角色分别编写代码，其中`PlayerID`为0的角色为【唐僧】或【九灵元圣】。

## 得分

每局游戏的最终得分=剩余经济*10+击杀敌方角色或摧毁敌方建筑得分+获取资源得分

## 地图

- 地图为矩形区域，游戏对象坐标为 (x,y)，x和y均为整数。
- **x坐标轴正方向竖直向下，y 坐标轴正方向水平向右**；**极坐标以 x坐标轴为极轴，角度逆时针为正方向**。即：对于坐标而言，地图的左上角为 (0,0)，左下角为 (50000,0)，右上角为 (0,50000)，右下角为 (50000,50000)；对于方向而言，竖直向下为 0，水平向右为 π/2，竖直向上为 π，水平向左为 3π/2。

- 地图由 50 \* 50 个格子构成，每个格子代表 1000 \* 1000 的正方形。每个格子的编号(CellX,CellY) 可以由以下公式计算得到：

  ​                                                **CellX=x/1000，CellY=y/1000**

### 区域类型

每个格子有对应的区域类型：**障碍物**、**空地**、**建筑**、**草丛**、**资源**。

#### 空地

- 在空地上【角色】可以自由移动。
- 在任意空地可以修建【陷阱】、【牢笼】两种建筑。
- 空地没有任何隐蔽视野的作用。

#### 障碍物

- 分布于地图边界及地图中特定位置，起到地形阻隔的作用。
- 【角色】不可进入障碍物，障碍物能阻隔某些【角色】的技能。
- 障碍物可以在【决战期】之前隐蔽视野，即各种物体可以被障碍物挡住。

#### 草丛

- 草丛散落于地图各处，是可隐藏视野的区域。
- 中心在草丛中的【角色】处于隐蔽状态，处于该片草丛之外的敌方【角色】不可见。发起攻击则破隐。
- 进入【决战期】，草丛消失，变为空地。

#### 建筑

- 玩家可以在空地上修建建筑，且需要【猴子猴孙】或【无名小妖】参与修建。修建位置为角色中心所在格子。
- 【角色】不可进入建筑，建筑能阻隔某些【角色】的技能，也能被敌方【角色】毁坏。
- 建筑没有隐藏视野的功能。
- 具体类型建筑详见后文。

#### 资源

- 资源散布在散布在地图各个点位，分为【经济资源】和【加成资源】。
- 【经济资源】的获取方式为开采，可以持续性获得经济。
- 【加成资源】需要击败驻守在资源点的Boss方可获得，且加成具有时间限制。
- 各类资源的详细功能，详见后文。

## 角色

- 角色分为【取经团队】阵营和【妖怪】阵营。双方只能控制己方阵营的角色。
- 【取经团队】阵营初始时即拥有角色【唐僧】，【妖怪】阵营初始时即拥有角色【九灵元圣】。
- 阵营其他角色需要花费经济召唤。
- 每个角色分为**主动状态**和**被动状态**。**主动状态**为在玩家控制下执行的状态，**被动状态**为角色受到控制时具有的状态。被动状态可能会对主动状态造成影响。每个角色的主动状态是不可叠加的。

  - **主动状态**

    - 空置

    - 开采

    - 攻击

    - 释放技能

    - 建造

    - 移动

  - **被动状态**

    - 致盲：在该状态下，角色无法进行攻击。
    - 击退：在该状态下，角色主动状态强制转为空置（即无法进行任何操作）。
    - 定身：在该状态下，角色无法移动。
    - 隐身：在该状态下，发起攻击前，角色对敌方不可见。
    - 灼烧：在此状态下，角色会持续掉血，并且被铁扇公主”芭蕉扇“技能命中时，会受到额外状态。
    - 死亡：在此状态下，角色会从地图上被移除。
- 角色的基础移动速度为2500/s，还会受到相关移速buff与debuff影响。
- 角色的基础攻击频率为1次/s，还会受到相关攻速buff影响。
- 角色的攻击是**锁定**的，即无法通过闪避避免伤害。
- 角色受到的伤害计算方式如下：`AP`为伤害初始值，`HarmCut`为减伤系数，`shield`为护盾值，则伤害会优先对护盾结算，护盾值降为0后，再对血量进行结算。护盾扣除值和血量扣除值都受到免伤系数影响，即：`subShield/subHP`=(1-`HarmCut`)*`AP`。
- 角色可以释放技能，技能的CD为60s，其中，孙悟空的技能**火眼金睛**释放时需指定释放角度`angle`,其为与x轴正方向的夹角，单位为弧度制，取值为(0,2π)。其余角色技能范围（若有）为以自己为圆心的圆。白龙马技能范围半径为10000，其余为6000。
- 每个阵营最多拥有6名角色（包括【唐僧】或【九灵元圣】）。

### 取经团队阵营

**【角色技能表】**

|  角色  | 类别  |                                      技能                                      |           备注           |
| :----: | :---: | :----------------------------------------------------------------------------: | :----------------------: |
|  唐僧  |   /   |                                                                                |            /             |
| 孙悟空 | 近战  |                   **火眼金睛**：发出激光束，造成50点贯穿伤害                   | 火眼金睛不可被障碍物阻挡 |
| 猪八戒 | 近战  |        **食神饱餐**：恢复生命值，短时间（15s）增加防御，获得50%伤害减免        |            /             |
| 沙悟净 | 远程  | **沙海迷踪**：致盲范围内（半径为6000）敌人，使其短时间无法进行有效攻击，持续5s |      障碍物无法阻挡      |
| 白龙马 | 远程  |      **龙腾四海**：化身为龙，对大范围（半径为10000）敌人造成20点冲击伤害       |      障碍物无法阻挡      |

**【角色数值表】**

|  角色  | 血量  | 攻击力 | 攻击范围 | 经济消耗 | 击杀得分 |
| :----: | :---: | :----: | :------: | :------: | :------: |
|  唐僧  | 1000  |   /    |    /     |    /     |   20w    |
| 孙悟空 |  200  |   30   |    1     |   5000   |   5000   |
| 猪八戒 |  300  |   20   |    2     |   4000   |   4000   |
| 沙悟净 |  150  |   10   |    5     |   3000   |   3000   |
| 白龙马 |  150  |   10   |    5     |   4000   |   4000   |

**【特殊单位】**

取经团队阵营具有特殊单位——猴子猴孙。

|   角色   | 血量  | 攻击力 | 攻击范围 | 经济消耗 | 击杀得分 |
| :------: | :---: | :----: | :------: | :------: | :------: |
| 猴子猴孙 |  50   |   5    |    1     |   1000   |   500    |

### 妖怪阵营

**【角色技能表】**

|   角色   | 类别  |                                            技能                                            |      备注      |
| :------: | :---: | :----------------------------------------------------------------------------------------: | :------------: |
| 九灵元圣 |   /   |                                                                                            |       /        |
|  红孩儿  | 近战  |        **三昧真火**：对一定范围内（半径为6000）的敌人附带每秒15点的灼烧伤害，持续5s        |       /        |
|  牛魔王  | 近战  |   **坚不可摧**：为自己和范围内（半径为6000）血量最低的队友附加一个能抵挡100点伤害的护盾    |       /        |
| 铁扇公主 | 远程  | **芭蕉扇**：击退一定范围内（半径为6000）的敌人，并对中了“三昧真火”的敌人附加20点的点燃伤害 | 障碍物可以阻挡 |
|  蜘蛛精  | 远程  |            **蛛网束缚**：定身范围内（半径为6000）的敌人，持续5s，并造成10点伤害            | 障碍物无法阻挡 |

**【角色数值表】**

|   角色   | 血量  | 攻击力 | 攻击范围 | 经济消耗 | 击杀得分 |
| :------: | :---: | :----: | :------: | :------: | :------: |
| 九灵元圣 | 1000  |   /    |    /     |    /     |   20w    |
|  红孩儿  |  200  |   25   |    1     |   5000   |   5000   |
|  牛魔王  |  300  |   20   |    2     |   4000   |   4000   |
| 铁扇公主 |  150  |   10   |    5     |   3000   |   3000   |
|  蜘蛛精  |  150  |   10   |    5     |   3000   |   3000   |

**【特殊单位】**

妖怪阵营具有特殊单位——无名小妖。

|   角色   | 血量  | 攻击力 | 攻击范围 | 经济消耗 | 击杀得分 |
| :------: | :---: | :----: | :------: | :------: | :------: |
| 无名小妖 |  50   |   5    |    1     |   1000   |   500    |

以上的**攻击范围**`RelativeAttackSize`是一个相对系数，具体换算方法为：`RelativeAttackSize = AttackSize/1000`.即，相对攻击范围的基准值是1000.

## 角色视野机制

- 0-7min，每个角色能看到以自身为圆心，半径为8000的圆内所有没有被遮挡或未处在隐身状态下的敌方角色。
  - 没有被遮挡是指：
    - 与敌方角色之间的连线上没有障碍物；
    - 敌方角色不在草丛中，或在草丛中的敌方角色发起了攻击。

- 7-10min，游戏进入【决战期】，可以获取敌方所有角色的视野，草丛消失变为空地。
- 地图中的所有资源点的位置都是可获取的。

## 资源

地图中各个点位分布着各种资源，玩家可以直接获取资源所在位置并展开争夺。资源类型分为**经济资源**和**加成资源**。经济资源以开采形式获取，加成资源则需击败驻守在资源点的boss来获取加成。

- **经济资源**：当角色进入到以资源点为中心的九宫格内时，角色可以执行操作【开采】。开采速度为200经济/s，同时得分也会以200/s增长。每个经济资源点的开采上限是1w。双方可以同时开采同一资源点。
- **加成资源**：大部分加成资源的加成效果、boss数值会随游戏时间变化，加成资源变化刷新的时间为0/3min/7min。不管该资源是否被获取，刷新时间到时便会自动刷新。
  - **生命之泉**：立即为全体队友回复50/100/150点血量，并获得2000/3000/4000得分。
  - **狂战士之力**：增加全体队友10/15/20点攻击力，持续时间30s/45s/60s，并获得4000/5000/6000得分。
  - **疾步之灵**：增加全体队友500/s的移速，持续60s，并获得3000得分。
  - **视野之灵**：照亮视野范围内的敌方陷阱、牢笼（并使二者立刻销毁），照亮视野范围内敌方隐身单位，持续60s，并获得3000得分。

附：各加成资源守关boss数值

|    名称    |    血量     |  攻击力  |
| :--------: | :---------: | :------: |
|  生命之泉  | 200/300/400 |    10    |
| 狂战士之力 | 400/500/600 | 10/15/20 |
|  疾步之灵  |     300     |    10    |
|  视野之灵  |     300     |    10    |

## 建筑

各类型建筑的功能、损耗见下表：

|   名称   |                                                 功能                                                 | 花费/破坏得分 | 血量  | 建造时间 |
| :------: | :--------------------------------------------------------------------------------------------------: | :-----------: | :---: | :------: |
|   兵营   | 角色出生点，开局自带一座兵营，至多可再修建两座兵营。同时半径1000范围内的己方角色可持续回血（10点/s） |    1w/6000    |  600  |   15s    |
|   农场   |                            每座农场每秒产出100经济，至多可再修建4个农场。                            |   8000/4000   |  400  |   10s    |
| 坑洞陷阱 |  修建后敌方不可见。当敌方角色触碰以陷阱为中心的九宫格时，受到每秒20点的伤害，持续5s，同时会暴露视野  |     1000      |   /   |    5s    |
| 牢笼陷阱 |      修建后敌方不可见。当敌方角色触碰以陷阱为中心的九宫格时，会被定身30s，无法移动，且暴露视野       |     1000      |   /   |    5s    |

**建筑的修建**：除”坑洞陷阱“和”牢笼陷阱“外，地图上有特定的建筑点位，角色移动到建筑点位九宫格内时，可以开始修建建筑。”坑洞陷阱“和”牢笼陷阱“可以在地图上任意一处”空地“或”草丛“修建，角色修建完成，会出现在距离角色中心最近的方格处。此两种建筑形同”空地“和”草丛“，在未触发情况下不会阻隔角色移动。

## 商店

玩家可以为己方角色购买装备。商店中有的装备如下：

|   名称   |                                  功能                                   |      花费      |
| :------: | :---------------------------------------------------------------------: | :------------: |
|   血瓶   |                    立刻为角色回复50/100/150点血量。                     | 1500/3000/4500 |
|   护盾   |              为角色套上一个可抵御50/100/150点伤害的护盾。               | 2000/3500/5000 |
|   鞋子   |                     为角色增加500点移速，持续60s。                      |      1500      |
| 净化药水 |                       角色免疫控制效果，持续30s。                       |      2000      |
| 隐身药水 |        7min前可购买，角色隐身，持续10s。若发起攻击，则立刻破隐。        |      4000      |
| 狂暴药水 | 7min后可购买，角色攻击力×1.2倍，攻击频率×1.25倍，移速增加300，持续30s。 |       1w       |

- 同种装备在同一角色身上只能存在一件，效果不可叠加。
